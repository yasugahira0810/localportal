angular.module("myapp",["ngStorage","ngSanitize"]).controller("MainController",["$scope","$localStorage","$log","$filter",function(t,n,e,o){t.$storage=n,t.$storage.links=t.$storage.links||[{title:"Google",url:"https://www.google.co.jp",tag:["portal"],date:new Date,count:0},{title:"ngStorage",url:"https://github.com/gsklee/ngStorage",tag:["github","angularjs"],date:new Date,count:0},{title:"localportal",url:"https://github.com/yasugahira0810/localportal",tag:["github","angularjs","original"],date:new Date,count:0}],t.addNew=function(){t.$storage.links.push({title:t.newLinkTitle,url:t.newLinkUrl,tag:t.newLinkTag,date:new Date,count:0}),t.newLinkBody=""},t.bulkImport=function(){for(importJson=angular.fromJson(t.importStr),e.log(importJson),i=0;i<importJson.length;i++)t.$storage.links.push(importJson[i])},t.sort=function(n,e){t.$storage.links=o("orderBy")(t.$storage.links,n,e)}}]),angular.module("myapp").directive("cmEditableText",function(){return{restrict:"A",require:"^ngModel",link:function(t,n,e,o){o.$render=function(){n.html(o.$viewValue)},n.on("dblclick",function(){var n=angular.element(this),e="editing";if(!n.hasClass(e)){n.addClass(e),n.html('<input type="text" value="'+o.$viewValue+'" />');var l=n.children();l.on("focus",function(){l.on("blur",function(){var a=l.val()||this.defaultValue;n.removeClass(e).text(a),l.off(),t.$apply(function(){o.$setViewValue(a)})})}),l[0].focus()}});var l=t.$on("$destroy",function(){angular.equals(l,null)||(n.off(),l(),l=null)})}}});
